-- Variables
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local mouse = LocalPlayer:GetMouse()
local flying = false
local speed = 50
local bodyGyro, bodyVelocity

-- Fonction pour activer le vol
function startFly()
    local char = LocalPlayer.Character
    local hrp = char:WaitForChild("HumanoidRootPart")

    bodyGyro = Instance.new("BodyGyro", hrp)
    bodyGyro.MaxTorque = Vector3.new(400000, 400000, 400000)
    bodyGyro.P = 3000
    bodyGyro.CFrame = hrp.CFrame

    bodyVelocity = Instance.new("BodyVelocity", hrp)
    bodyVelocity.MaxForce = Vector3.new(400000, 400000, 400000)
    bodyVelocity.Velocity = Vector3.new(0, 0, 0)

    game:GetService("RunService").RenderStepped:Connect(function()
        if flying then
            local cf = workspace.CurrentCamera.CFrame
            local direction = Vector3.new(0, 0, 0)

            if mouse.W then direction += cf.LookVector end
            if mouse.S then direction -= cf.LookVector end
            if mouse.A then direction -= cf.RightVector end
            if mouse.D then direction += cf.RightVector end

            bodyVelocity.Velocity = direction.Unit * speed + Vector3.new(0, 20, 0)
            bodyGyro.CFrame = workspace.CurrentCamera.CFrame
        end
    end)
end

-- Fonction pour d√©sactiver le vol
function stopFly()
    if bodyGyro then
        bodyGyro:Destroy()
    end
    if bodyVelocity then
        bodyVelocity:Destroy()
    end
end

-- Toggle Fly
local function toggleFly()
    flying = not flying
    if flying then
        startFly()
    else
        stopFly()
    end
end

-- Appel Toggle Fly
toggleFly()
